---
Status: Approved
Epic: 1
Story: 1.1.1
Title: Implement Initial Database Schema via Migrations
---

### Story
As a Developer,
I want to implement the initial database schema for the existing Laravel backend,
so that the database is ready for feature development.

### Acceptance Criteria
1.  The default `create_users_table` migration provided by Laravel is modified, and six new migration files are created in `backend/database/migrations/`. Together, these migrations must establish the `users`, `medications`, `prescriptions`, `orders`, `order_items`, `advice_requests`, and `notifications` tables, accurately reflecting the schema in [`docs/architecture/database-schema.md`](../../docs/architecture/database-schema.md).
2.  The `php artisan migrate` command executes successfully against the pre-configured SQLite database, as mandated by project constraint [NFR2](../../docs/prd/requirements.md#non-functional) and documented in [`technical-assumptions.md`](../../docs/prd/technical-assumptions.md). The command must complete without errors, creating all required tables and indexes.

### Tasks / Subtasks
1.  **Modify `users` Table Migration** (AC: #1)
    *   [ ] Edit the default `create_users_table` migration file (e.g., `backend/database/migrations/2014_10_12_000000_create_users_table.php`).
    *   [ ] Alter the `users` table schema to match the definition in [`docs/architecture/database-schema.md`](../../docs/architecture/database-schema.md). This includes adding the `phone_number`, `address`, `role`, and `status` columns.
    *   [ ] Remove columns not specified in the schema (e.g., `email_verified_at`, `remember_token`).
    *   [ ] Ensure the user migration file only contains the schema for the `users` table, as other tables (e.g., `password_reset_tokens`) are handled in separate, dedicated migration files.
2.  **Create New Migration Files** (AC: #1)
    *   [ ] Create a new migration for the `medications` table.
    *   [ ] Create a new migration for the `prescriptions` table.
    *   [ ] Create a new migration for the `orders` table.
    *   [ ] Create a new migration for the `order_items` table.
    *   [ ] Create a new migration for the `advice_requests` table.
    *   [ ] Create a new migration for the `notifications` table.
3.  **Execute and Verify Migrations** (AC: #2)
    *   [ ] Run `php artisan migrate` to apply the schema to the SQLite database.
    *   [ ] Confirm that the command completes without errors and the expected tables and indexes are created.

### Dev Notes
**CRITICAL:** This story establishes the database foundation. All table and column names must strictly adhere to the architecture documents. For the database structure, [`docs/architecture/database-schema.md`](../../docs/architecture/database-schema.md) is the definitive source of truth, providing the exact code to be implemented.

*   **Handling Existing Migrations:** A default `users` table migration (e.g., `2014_10_12_000000_create_users_table.php`) already exists from the initial Laravel installation. This file must be **modified**, not replaced. Other default migrations provided by Laravel (e.g., for `jobs`, `failed_jobs`, `personal_access_tokens`) can be ignored for this story, as they are framework-level concerns and not part of the core application domain schema.
*   **Source of Truth:** The complete implementation for the migrations is defined in [`docs/architecture/database-schema.md`](../../docs/architecture/database-schema.md). This document provides the exact PHP code using Laravel's Schema Builder. The task is to correctly place this code into the corresponding migration files. No translation from SQL or any other language is required.
*   **Laravel Conventions:** The schema code provided in the source document already uses Laravel best practices, including `foreignId()->constrained()`, `enum()` for type safety, and appropriate `onDelete()` clauses (`restrictOnDelete`, `cascadeOnDelete`, `nullOnDelete`). The implementation must replicate this code precisely to ensure data integrity and consistency with the documented design rationale.

#### Testing
*   As per [`technical-assumptions.md`](../../docs/prd/technical-assumptions.md), the project follows a unit and integration testing strategy.
*   For this story, testing is primarily a verification process. The primary test is the successful execution of `php artisan migrate` as specified in AC #2.
*   Manual verification of the generated `database.sqlite` file schema against [`docs/architecture/database-schema.md`](../../docs/architecture/database-schema.md) is recommended to confirm all constraints and indexes are created correctly. No specific unit or feature test files are required for this story.

### Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |

### Dev Agent Record
This section is populated by the development agent during implementation.

#### Agent Model Used
_TBD_

#### Debug Log References
_TBD_

#### Completion Notes List
_TBD_

#### File List
_TBD_

### QA Results
_TBD_