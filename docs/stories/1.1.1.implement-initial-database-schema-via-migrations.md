---
Status: Approved
Epic: 1
Story: 1.1.1
Title: Implement Initial Database Schema via Migrations
---

### Story
As a Developer,
I want to implement the initial database schema for the existing Laravel backend,
so that the database is ready for feature development.

### Acceptance Criteria
1.  Seven initial database migration files are created in the `backend/database/migrations/` directory. These migrations must create the `users`, `medications`, `prescriptions`, `orders`, `order_items`, `advice_requests`, and `notifications` tables, accurately reflecting the column definitions, types, constraints, and indexes defined in the project's official DDL document: [`docs/architecture/database-schema.md`](../../docs/architecture/database-schema.md).
2.  The `php artisan migrate` command executes successfully against the pre-configured SQLite database, as mandated by project constraint [NFR2](../../docs/prd/requirements.md#non-functional) and documented in [`technical-assumptions.md`](../../docs/prd/technical-assumptions.md). The command must complete without errors, creating all required tables and indexes.

### Tasks / Subtasks
1.  **Create Migration Files** (AC: #1)
    *   [ ] Based on the DDL in [`docs/architecture/database-schema.md`](../../docs/architecture/database-schema.md), create the necessary migration files inside `backend/database/migrations/`.
    *   [ ] Create migration for the `users` table.
    *   [ ] Create migration for the `medications` table.
    *   [ ] Create migration for the `prescriptions` table.
    *   [ ] Create migration for the `orders` table.
    *   [ ] Create migration for the `order_items` table.
    *   [ ] Create migration for the `advice_requests` table.
    *   [ ] Create migration for the `notifications` table.
2.  **Execute and Verify Migrations** (AC: #2)
    *   [ ] Run `php artisan migrate` to apply the schema to the SQLite database.
    *   [ ] Confirm that the command completes without errors and the expected tables and indexes are created.

### Dev Notes
**CRITICAL:** This story establishes the database foundation. All table and column names must strictly adhere to the architecture documents to ensure consistency with the [`docs/architecture/data-models.md`](../../docs/architecture/data-models.md).

*   **Source of Truth:** The complete database schema (DDL) to be used for the initial migrations is defined in [`docs/architecture/database-schema.md`](../../docs/architecture/database-schema.md). This document includes SQLite-specific implementations, such as using `CHECK` constraints to emulate `ENUM` types and specific `ON DELETE` clauses for foreign keys, which must be correctly translated into the Laravel migration files.
*   **Laravel Conventions:** While the schema is defined in raw SQL, the implementation should use Laravel's Schema Builder. For example, `TEXT NOT NULL CHECK(role IN ('client', ...))` should be implemented using `$table->string('role')->default('client');` and a raw `DB::statement` for the `CHECK` constraint if necessary for SQLite compatibility, or by relying on application-level validation. Foreign keys should be defined using methods like `foreignId('client_id')->constrained('users')->onDelete('restrict')`.

#### Testing
*   As per [`technical-assumptions.md`](../../docs/prd/technical-assumptions.md), the project follows a unit and integration testing strategy.
*   For this story, testing is primarily a verification process. The primary test is the successful execution of `php artisan migrate` as specified in AC #2.
*   Manual verification of the generated `database.sqlite` file schema against [`docs/architecture/database-schema.md`](../../docs/architecture/database-schema.md) is recommended to confirm all constraints and indexes are created correctly. No specific unit or feature test files are required for this story.

### Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |

### Dev Agent Record
This section is populated by the development agent during implementation.

#### Agent Model Used
_TBD_

#### Debug Log References
_TBD_

#### Completion Notes List
_TBD_

#### File List
_TBD_

### QA Results
_TBD_